# 地址: https://YiqunZhang.github.io/proxy/shadowrocket/main.conf

[General]
# 旁路系统. 如果禁用此选项, 它可能会导致一些系统问题, 如推送通知延误
bypass-system = true

# 如果关闭该选项, 域名解析返回私有IP, shadowrocket会认为该域名被劫持而强制使用代理.
private-ip-answer = true

# IPv6
ipv6 = false
prefer-ipv6 = false

# The fallback behavior when UDP traffic matches a policy that doesn't support the UDP relay. Possible values: DIRECT, REJECT.
udp-policy-not-supported-behaviour = REJECT

# 跳过代理. 此选项强制这些域名或IP的连接范围由shadowrocket TUN接口来处理, 而不是Shadowrocket代理服务器. 此选项用于解决一些应用程序的一些兼容性问题.
skip-proxy = *

# 其他
icmp-auto-reply = true
always-reject-url-rewrite = false


# TUN旁路路由. 使用此选项可以绕过指定的IP范围, 让其他协议通过.
## 保留IP地址, 详见: https://zh.wikipedia.org/zh-sg/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80
## 本地回环: 127.0.0.0/8,localhost
## 广播和多播: 255.255.255.255/32,224.0.0.0/4
## 私有局域网: 192.168.0.0/16  # 172.16.0.0/12,10.0.0.0/8
## 运营商大规模NAT(CGNAT): 100.64.0.0/10
## 无DHCP时自动配置的链路本地地址(APIPA): 169.254.0.0/16
## 测试用地址: 198.18.0.0/15
## 文档示例: 192.0.2.0/24,198.51.100.0/24,203.0.113.0/24,233.252.0.0/24
## 其他 保留/废弃 地址: 0.0.0.0/8,192.0.0.0/24,192.88.99.0/24,240.0.0.0/4
tun-excluded-routes = 127.0.0.0/8,localhost,255.255.255.255/32,224.0.0.0/4,192.168.0.0/16,100.64.0.0/10,169.254.0.0/16,198.18.0.0/15,192.0.2.0/24,198.51.100.0/24,203.0.113.0/24,233.252.0.0/24,0.0.0.0/8,192.0.0.0/24,192.88.99.0/24,240.0.0.0/4

## Apple本地wifi认证检测: captive.apple.com
## Apple本地系统服务, 有反代理检测: seed-sequoia.siri.apple.com
## 本地回环 和 局域网设备发现: localhost,*.local

# TUN包含路由. 默认情况下, shadowrocket接口会声明自己为默认路由, 但由于 Wi-Fi接口的路由较小, 有些流量可能不会通过shadowrocket接口. 使用此选项可以添加一个较小的路由表.
tun-included-routes = 


# DNS
## DNS覆写. 你可以使用此选项覆盖默认的DNS服务器. iOS系统不允许你在蜂窝网络上修改DNS设置. 现在使用shadowrocket你可以很容易地做到这一点.
dns-server = 223.5.5.5,119.29.29.29,180.168.255.118

## 备用 DNS. 如果使用 DNS-over-TLS, DNS-over-HTTPS或者DNS-over-QUIC的域名查询因某种原因而失败, shadowrocket将退回并使用操作系统配置的默认DNS, 而不是显示错误.
fallback-dns-server = system
dns-fallback-system = false
dns-direct-system = false
dns-direct-fallback-proxy = false

## 劫持 DNS. 默认情况下, shadowrocket只返回发送到shadowrocket DNS地址的DNS查询的假IP地址(198.18.0.2). 有些设备或软件总是使用硬编码的DNS服务器(例如Google Speakers总是使用8.8.8.8). 你可以使用此选项劫持查询, 以获得一个假地址.
hijack-dns = 8.8.8.8:53

## 总是真实IP. 这个选项要求shadowrocket在TUN处理DNS请求时返回一个真实的IP地址而不是假的IP地址.
### Apple本地wifi认证检测: captive.apple.com
### Apple本地系统服务, 有反代理检测: seed-sequoia.siri.apple.com
### 本地回环 和 局域网设备发现: localhost,*.local
always-real-ip = localhost,*.local




[Proxy Group]
# 建议只使用 select / url-test

家 = select,policy-regex-filter=家|HOME|Home|home
第四范式 = select,policy-regex-filter=范式|4Paradigm|4paradigm|4pd
澳洲 = url-test,policy-regex-filter=🇦🇺|澳大利亚|澳洲|AU,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=30,timeout=5
日本 = url-test,policy-regex-filter=🇯🇵|日本|JP,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=30,timeout=5
台湾 = url-test,policy-regex-filter=🇹🇼|台湾|TW,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=30,timeout=5
美国 = url-test,policy-regex-filter=🇺🇸|美国|US,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=30,timeout=5
新加坡 = url-test,policy-regex-filter=🇸🇬|新加坡|SG,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=30,timeout=5
香港 = url-test,policy-regex-filter=🇭🇰|香港|hk,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=30,timeout=5


[Rule]
# 建议只使用 DOMAIN-SUFFIX / DOMAIN / DOMAIN-KEYWORD / IP-CIDR

# 家
IP-CIDR,10.10.1.0/24,家,no-resolve
IP-CIDR,10.10.2.0/24,家,no-resolve

# 第四范式
IP-CIDR,172.24.0.0/16,第四范式,no-resolve
IP-CIDR,172.25.0.0/16,第四范式,no-resolve
IP-CIDR,172.26.0.0/16,第四范式,no-resolve
IP-CIDR,172.27.0.0/16,第四范式,no-resolve
IP-CIDR,172.28.0.0/16,第四范式,no-resolve

# 澳洲
## 政府
DOMAIN-SUFFIX,gov.au,澳洲

## 学校
DOMAIN-SUFFIX,anu.edu.au,澳洲

## poe
DOMAIN-SUFFIX,poe.com,澳洲

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/AppleNews/AppleNews.list,澳洲
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,澳洲
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Amazon/Amazon.list,澳洲

# 日本
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Nintendo/Nintendo.list,DIRECT

# 台湾

# 美国
## google family: 
# Alphabet/Google/Gmail/Youtube/Blogger
# GoogleVentures/CapitalG/GoogleX
# Chrome/ChromeOS/Chromebook/Chromium/Blink/Tensorflow
# AMP/Waze/DeepMind/Verily/Calico/Fitbit/Kaggle
DOMAIN-SUFFIX,abc.xyz,美国
DOMAIN-SUFFIX,google,美国
DOMAIN-SUFFIX,google.com,美国
DOMAIN-SUFFIX,gstatic.com,美国
DOMAIN-SUFFIX,googleapis.com,美国
DOMAIN-SUFFIX,gsuite.com,美国
DOMAIN-SUFFIX,gmail.com,美国
DOMAIN-SUFFIX,googlevideo.com,美国
DOMAIN-SUFFIX,youtube.com,美国
DOMAIN-SUFFIX,youtu.be,美国
DOMAIN-SUFFIX,yt.be,美国
DOMAIN-SUFFIX,youtubefanfest.com,美国
DOMAIN-SUFFIX,youtubeeducation.com,美国
DOMAIN-SUFFIX,youtubegaming.com,美国
DOMAIN-SUFFIX,youtubekids.com,美国
DOMAIN-SUFFIX,youtube-nocookie.com,美国
DOMAIN-SUFFIX,youtubemobilesupport.com,美国
DOMAIN-SUFFIX,youtubego.com,美国
DOMAIN-SUFFIX,withyoutube.com,美国
DOMAIN-SUFFIX,blogger.com,美国
DOMAIN-SUFFIX,blogspot.com,美国
DOMAIN-SUFFIX,chrome.com,美国
DOMAIN-SUFFIX,chromeos.dev,美国
DOMAIN-SUFFIX,chromebook.com,美国
DOMAIN-SUFFIX,chromium.org,美国
DOMAIN-SUFFIX,blink.org,美国
DOMAIN-SUFFIX,tensorflow.org,美国
DOMAIN-SUFFIX,gv.com,美国
DOMAIN-SUFFIX,capitalg.com,美国
DOMAIN-SUFFIX,x.team,美国
DOMAIN-SUFFIX,x.company,美国
DOMAIN-SUFFIX,amp.dev,美国
DOMAIN-SUFFIX,waze.com,美国
DOMAIN-SUFFIX,deepmind.com,美国
DOMAIN-SUFFIX,waymo.com,美国
DOMAIN-SUFFIX,verily.com,美国
DOMAIN-SUFFIX,calicolabs.com,美国
DOMAIN-SUFFIX,fitbit.com,美国
DOMAIN-SUFFIX,kaggle.com,美国
DOMAIN-SUFFIX,kaggle.io,美国
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,美国
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,美国

# 新加坡

# 香港
## VPN工具和提供商
DOMAIN-SUFFIX,metacubex.one,香港
DOMAIN-SUFFIX,bygcloud.com,香港
DOMAIN-SUFFIX,sibker.com,香港

## porn
DOMAIN-SUFFIX,pornhub.com,香港
DOMAIN-SUFFIX,jable.tv,香港
DOMAIN-SUFFIX,onlyfans.com,香港

## docker
DOMAIN-SUFFIX,docker.com,香港
DOMAIN-SUFFIX,docker.io,香港
DOMAIN-SUFFIX,dockerhub.com,香港

## huggingface
DOMAIN-SUFFIX,huggingface.co,香港
DOMAIN-SUFFIX,hf.co,香港
DOMAIN-SUFFIX,hf.space,香港
DOMAIN-SUFFIX,huggingface.com,香港

## github
DOMAIN-SUFFIX,github.com,香港
DOMAIN-SUFFIX,github.io,香港
DOMAIN-SUFFIX,github.dev,香港
DOMAIN-SUFFIX,gh.io,香港
DOMAIN-SUFFIX,git.io,香港
DOMAIN-SUFFIX,ghcr.io,香港
DOMAIN-SUFFIX,github.blog,香港
DOMAIN-SUFFIX,github.community,香港
DOMAIN-SUFFIX,githubusercontent.com,香港
DOMAIN-SUFFIX,githubstatus.com,香港
DOMAIN-SUFFIX,githubapp.com,香港
DOMAIN-SUFFIX,githubassets.com,香港
DOMAIN-SUFFIX,githubcopilot.com,香港
DOMAIN-SUFFIX,githubhackathon.com,香港
DOMAIN-SUFFIX,githubnext.com,香港
DOMAIN-SUFFIX,githubpreview.dev,香港
DOMAIN-SUFFIX,githubuniverse.com,香港
DOMAIN-SUFFIX,thegithubshop.com,香港
DOMAIN-SUFFIX,github-avatars.oss-cn-hongkong.aliyuncs.com,香港
DOMAIN-SUFFIX,github-cloud.s3.amazonaws.com,香港

## npm
DOMAIN-SUFFIX,npmjs.com,香港
DOMAIN-SUFFIX,npmjs.org,香港
DOMAIN-SUFFIX,npm.im,香港
DOMAIN-SUFFIX,npm.community,香港

## gitbook
DOMAIN-SUFFIX,gitbook.com,香港
DOMAIN-SUFFIX,gitbook.io,香港

## X
DOMAIN-SUFFIX,x.com,香港

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/PayPal/PayPal.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TVB/TVB.list,香港
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Netflix/Netflix.list,香港
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Disney/Disney.list,香港
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/HBO/HBO.list,香港
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,香港

# 直连
FINAL,DIRECT

# 原始
## HK

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Steam/Steam.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Sony/Sony.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Epic/Epic.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/SteamCN/SteamCN.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Game/Game.list,DIRECT


[Host]
# 域名 指定值
localhost = 127.0.0.1
# 域名 指定DNS服务器
*.apple.cn = server:system


[URL Rewrite]
[MITM]






















