# ç­–ç•¥å€¾å‘: æŒ‡å®šå¤§é‡åå•DIRECT, æŒ‡å®šå°‘é‡åå•PROXY, GEOIPåˆ¤æ–­DIRECT, å…œåº•PROXY
# åœ°å€: https://YiqunZhang.github.io/proxy/shadowrocket/simple.conf

[General]
# æ—è·¯ç³»ç»Ÿ. å¦‚æœç¦ç”¨æ­¤é€‰é¡¹, å®ƒå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç³»ç»Ÿé—®é¢˜, å¦‚æ¨é€é€šçŸ¥å»¶è¯¯
bypass-system = true

# å¦‚æœå…³é—­è¯¥é€‰é¡¹, åŸŸåè§£æè¿”å›ç§æœ‰IP, shadowrocketä¼šè®¤ä¸ºè¯¥åŸŸåè¢«åŠ«æŒè€Œå¼ºåˆ¶ä½¿ç”¨ä»£ç†.
private-ip-answer = true

# IPv6
ipv6 = false
prefer-ipv6 = false

# The fallback behavior when UDP traffic matches a policy that doesn't support the UDP relay. Possible values: DIRECT, REJECT.
udp-policy-not-supported-behaviour = REJECT

# è·³è¿‡ä»£ç†. æ­¤é€‰é¡¹å¼ºåˆ¶è¿™äº›åŸŸåæˆ–IPçš„è¿æ¥èŒƒå›´ç”±shadowrocket TUNæ¥å£æ¥å¤„ç†, è€Œä¸æ˜¯Shadowrocketä»£ç†æœåŠ¡å™¨. æ­¤é€‰é¡¹ç”¨äºè§£å†³ä¸€äº›åº”ç”¨ç¨‹åºçš„ä¸€äº›å…¼å®¹æ€§é—®é¢˜.
skip-proxy = *

# å…¶ä»–
icmp-auto-reply = true
always-reject-url-rewrite = false


# TUNæ—è·¯è·¯ç”±. ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥ç»•è¿‡æŒ‡å®šçš„IPèŒƒå›´, è®©å…¶ä»–åè®®é€šè¿‡.
## ä¿ç•™IPåœ°å€, è¯¦è§: https://zh.wikipedia.org/zh-sg/%E4%BF%9D%E7%95%99IP%E5%9C%B0%E5%9D%80
## æœ¬åœ°å›ç¯: 127.0.0.0/8,localhost
## å¹¿æ’­å’Œå¤šæ’­: 255.255.255.255/32,224.0.0.0/4
## ç§æœ‰å±€åŸŸç½‘: 192.168.0.0/16  # 172.16.0.0/12,10.0.0.0/8
## è¿è¥å•†å¤§è§„æ¨¡NAT(CGNAT): 100.64.0.0/10
## æ— DHCPæ—¶è‡ªåŠ¨é…ç½®çš„é“¾è·¯æœ¬åœ°åœ°å€(APIPA): 169.254.0.0/16
## æµ‹è¯•ç”¨åœ°å€: 198.18.0.0/15
## æ–‡æ¡£ç¤ºä¾‹: 192.0.2.0/24,198.51.100.0/24,203.0.113.0/24,233.252.0.0/24
## å…¶ä»– ä¿ç•™/åºŸå¼ƒ åœ°å€: 0.0.0.0/8,192.0.0.0/24,192.88.99.0/24,240.0.0.0/4
tun-excluded-routes = 127.0.0.0/8,localhost,255.255.255.255/32,224.0.0.0/4,192.168.0.0/16,100.64.0.0/10,169.254.0.0/16,198.18.0.0/15,192.0.2.0/24,198.51.100.0/24,203.0.113.0/24,233.252.0.0/24,0.0.0.0/8,192.0.0.0/24,192.88.99.0/24,240.0.0.0/4

## Appleæœ¬åœ°wifiè®¤è¯æ£€æµ‹: captive.apple.com
## Appleæœ¬åœ°ç³»ç»ŸæœåŠ¡, æœ‰åä»£ç†æ£€æµ‹: seed-sequoia.siri.apple.com
## æœ¬åœ°å›ç¯ å’Œ å±€åŸŸç½‘è®¾å¤‡å‘ç°: localhost,*.local

# TUNåŒ…å«è·¯ç”±. é»˜è®¤æƒ…å†µä¸‹, shadowrocketæ¥å£ä¼šå£°æ˜è‡ªå·±ä¸ºé»˜è®¤è·¯ç”±, ä½†ç”±äº Wi-Fiæ¥å£çš„è·¯ç”±è¾ƒå°, æœ‰äº›æµé‡å¯èƒ½ä¸ä¼šé€šè¿‡shadowrocketæ¥å£. ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾ƒå°çš„è·¯ç”±è¡¨.
tun-included-routes = 


# DNS
## DNSè¦†å†™. ä½ å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹è¦†ç›–é»˜è®¤çš„DNSæœåŠ¡å™¨. iOSç³»ç»Ÿä¸å…è®¸ä½ åœ¨èœ‚çªç½‘ç»œä¸Šä¿®æ”¹DNSè®¾ç½®. ç°åœ¨ä½¿ç”¨shadowrocketä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åšåˆ°è¿™ä¸€ç‚¹.
dns-server = system

## å¤‡ç”¨ DNS. å¦‚æœä½¿ç”¨ DNS-over-TLS, DNS-over-HTTPSæˆ–è€…DNS-over-QUICçš„åŸŸåæŸ¥è¯¢å› æŸç§åŸå› è€Œå¤±è´¥, shadowrocketå°†é€€å›å¹¶ä½¿ç”¨æ“ä½œç³»ç»Ÿé…ç½®çš„é»˜è®¤DNS, è€Œä¸æ˜¯æ˜¾ç¤ºé”™è¯¯.
fallback-dns-server = system
dns-fallback-system = false
dns-direct-system = false
dns-direct-fallback-proxy = true

## åŠ«æŒ DNS. é»˜è®¤æƒ…å†µä¸‹, shadowrocketåªè¿”å›å‘é€åˆ°shadowrocket DNSåœ°å€çš„DNSæŸ¥è¯¢çš„å‡IPåœ°å€(198.18.0.2). æœ‰äº›è®¾å¤‡æˆ–è½¯ä»¶æ€»æ˜¯ä½¿ç”¨ç¡¬ç¼–ç çš„DNSæœåŠ¡å™¨(ä¾‹å¦‚Google Speakersæ€»æ˜¯ä½¿ç”¨8.8.8.8). ä½ å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹åŠ«æŒæŸ¥è¯¢, ä»¥è·å¾—ä¸€ä¸ªå‡åœ°å€.
hijack-dns = 8.8.8.8:53

## æ€»æ˜¯çœŸå®IP. è¿™ä¸ªé€‰é¡¹è¦æ±‚shadowrocketåœ¨TUNå¤„ç†DNSè¯·æ±‚æ—¶è¿”å›ä¸€ä¸ªçœŸå®çš„IPåœ°å€è€Œä¸æ˜¯å‡çš„IPåœ°å€.
### Appleæœ¬åœ°wifiè®¤è¯æ£€æµ‹: captive.apple.com
### Appleæœ¬åœ°ç³»ç»ŸæœåŠ¡, æœ‰åä»£ç†æ£€æµ‹: seed-sequoia.siri.apple.com
### æœ¬åœ°å›ç¯ å’Œ å±€åŸŸç½‘è®¾å¤‡å‘ç°: localhost,*.local
always-real-ip = localhost,*.local



[Proxy Group]
# å»ºè®®åªä½¿ç”¨ select / url-test
AUTO = url-test,policy-regex-filter=*,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3

å®¶ = select,policy-regex-filter=å®¶|HOME|Home|home
ç¬¬å››èŒƒå¼ = select,policy-regex-filter=èŒƒå¼|4Paradigm|4paradigm|4pd

æ¾³æ´² = url-test,policy-regex-filter=ğŸ‡¦ğŸ‡º|æ¾³å¤§åˆ©äºš|æ¾³æ´²|AU,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3
ç¾å›½ = url-test,policy-regex-filter=ğŸ‡ºğŸ‡¸|ç¾å›½|US,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3
é¦™æ¸¯ = url-test,policy-regex-filter=ğŸ‡­ğŸ‡°|é¦™æ¸¯|hk,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3
æ—¥æœ¬ = url-test,policy-regex-filter=ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3
å°æ¹¾ = url-test,policy-regex-filter=ğŸ‡¹ğŸ‡¼|å°æ¹¾|tw,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3
æ–°åŠ å¡ = url-test,policy-regex-filter=ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|sg,url=http://cp.cloudflare.com/generate_204,interval=60,tolerance=30,timeout=3



[Rule]
# å»ºè®®åªä½¿ç”¨ DOMAIN-SUFFIX / DOMAIN / DOMAIN-KEYWORD / IP-CIDR

# <å®¶>
IP-CIDR,10.10.1.0/24,å®¶,no-resolve
IP-CIDR,10.10.2.0/24,å®¶,no-resolve


# <ç¬¬å››èŒƒå¼>
IP-CIDR,172.24.0.0/16,ç¬¬å››èŒƒå¼,no-resolve
IP-CIDR,172.25.0.0/16,ç¬¬å››èŒƒå¼,no-resolve
IP-CIDR,172.26.0.0/16,ç¬¬å››èŒƒå¼,no-resolve
IP-CIDR,172.27.0.0/16,ç¬¬å››èŒƒå¼,no-resolve
IP-CIDR,172.28.0.0/16,ç¬¬å››èŒƒå¼,no-resolve


# <PROXY>
## porn
DOMAIN-SUFFIX,pornhub.com,PROXY
DOMAIN-SUFFIX,jable.tv,PROXY
DOMAIN-SUFFIX,onlyfans.com,PROXY


# <DIRECT>
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list,DIRECT


# <REJECT>
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list,REJECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list,REJECT


# <FINAL>
GEOIP,CN,DIRECT,no-resolve
FINAL,PROXY



[Host]
# åŸŸå æŒ‡å®šå€¼
localhost = 127.0.0.1
# åŸŸå æŒ‡å®šDNSæœåŠ¡å™¨
*.apple.cn = server:system



[URL Rewrite]
[MITM]


